- name: k8s
  become: true
  become_method: sudo
  vars:
  # cloud_vendor: aws
  # FOR ANOTHER LEVEL OF GROUP:CHILDREN STRUCTURE
  # vars_files:
  # - "vars/{{ function }}.yml"
  # - "vars/{{ xyz }}.yml"
  hosts: all
  roles:
    - sshd
    - users
    - system
    - netplan
    - network
    - microk8s
    #- hardening
    #- cleanup
  serial: "{{ batch_size|default(10) }}"


- name: k8s-with-kvm
  become: true
  become_method: sudo
  hosts:
  - cmp1-nuc11
  roles:
  - kvm-setup
  - terraform

# no_log: '{{ no_log_ansible|default(False) }}'

# environment:
#   HTTP_PROXY: "{{ http_proxy }}"
#   HTTPS_PROXY: "{{ https_proxy }}"
#   NO_PROXY: "{{ no_proxy }}"
#   http_proxy: "{{ http_proxy }}"
#   https_proxy: "{{ https_proxy }}"
#   no_proxy: "{{ no_proxy }}"
